{% extends 'base.html.twig' %} {% block body %}
  <div class="body-width">
    <h2 class="page-title">Projets</h2>
  </div>

<section class="portfolio dfull wrap">

  {% for article in articles %} 
  <div class="project-container tac dfull gap fdc bg-dark light bxs">
    <h2> {{article.title}} </h2>
    <img src="{{article.image}}" alt="{{article.title}}" />
    <div class="project-contain dfull fdc">
      <h3>{{article.chapo}}</h3>
      <p class="nbText">
        {{article.content}}
      </p>
      <button class="btn dark bg-light-blue">
        <a href="index.php?action=article&id_article={{article.id_article}}">Voir plus</a>
      </button>
      {% if session.role == 1  %}
      <a href="index.php?action=formUpdateArticle&id_article={{article.id_article}}"> Modifier un article </a>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</section>

<script>
  let paragraph = document.querySelectorAll(".nbText");
  let maxLength = 210;

  paragraph.forEach((paragraph) => {
    if (paragraph.textContent.length > maxLength) {
      const truncatedText =
        paragraph.textContent.substring(0, maxLength) + "...";
      paragraph.textContent = truncatedText;
    }
  });
</script>

{% endblock %}
